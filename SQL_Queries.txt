/* Copy and paste these queries on a MySQL Command Line Client or any database editor to have the entire database schema, ready to be used with the website code.
Additionally, password in server.js (line 23) should be changed to your MySQL account password. */

CREATE DATABASE IF NOT EXISTS Inktrospect;
USE Inktrospect;

CREATE TABLE IF NOT EXISTS contact_messages_table (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FullName VARCHAR(100) NULL,
    Email VARCHAR(100) NULL,
    Message TEXT NULL,
    SubmittedAt TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS users_table (
    UserID VARCHAR(50) NOT NULL PRIMARY KEY,
    Email VARCHAR(255) NOT NULL UNIQUE,
    Password VARCHAR(255) NOT NULL,
    DateofReg DATETIME NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS mood_table (
    MoodID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UserID VARCHAR(50) NOT NULL,
    Mood ENUM('Angry','Sad','Sleepy','Content','Happy') NULL,
    Date DATE NULL,
    CONSTRAINT fk_mood_user FOREIGN KEY (UserID) REFERENCES users_table(UserID)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS notes_table (
    NoteID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UserID VARCHAR(50) NOT NULL,
    Title VARCHAR(100) NULL,
    Content TEXT NULL,
    Date DATETIME NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_notes_user FOREIGN KEY (UserID) REFERENCES users_table(UserID)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS tasks_table (
    TaskID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    UserID VARCHAR(50) NOT NULL,
    Task TEXT NULL,
    Status ENUM('Checked','Unchecked') NOT NULL DEFAULT 'Unchecked',
    CONSTRAINT fk_tasks_user FOREIGN KEY (UserID) REFERENCES users_table(UserID)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);
